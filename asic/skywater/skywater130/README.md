# Sky130 PDK

This directory contains files for the Skywater 130nm open source PDK,
restructured into the format required for SC. These files are tagged with the
latest PDK version number (v0.0.2), although many of the files come from
OpenROAD and OpenLANE, rather than the [golden
copy](https://github.com/google/skywater-pdk-libs-sky130_fd_sc_hd) from Google.

## File sources

### `pdk/apr/`

`sky130_fd_sc_hd.tlef`

Source: [OpenROAD](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/2484116345a52074fee4b1755656369a2a9f75ce/flow/platforms/sky130hd/lef/sky130_fd_sc_hd.tlef)

Up-to-date as of commit `2484116`, no modifications.

### `pdk/setup/klayout/`

`skywater130.lyt`

Source: based on [this
template](https://github.com/RTimothyEdwards/open_pdks/blob/master/sky130/klayout/sky130.lyt)
in the open_pdks repo. This is slightly different from the [version](
https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/master/flow/platforms/sky130hd/sky130hd.lyt)
used by
OpenROAD, although I'm not sure if these differences are significant. This
version is used by OpenLANE (after being run through a script that
populates things like the `TECHNAME` variable), so it seemed like the safer option.

Up-to-date as of commit `b06f0f2`. Modifications:

- Used filled-in version of template post-install
- Adjusted name of LEF file in `<lef-files>` tag

`sky130.lyp`

Source: [open_pdks](https://github.com/RTimothyEdwards/open_pdks/blob/master/sky130/klayout/sky130.lyp)

Up-to-date as of `b06f0f2`.

`fill.json`

Source: [OpenROAD](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/master/flow/platforms/sky130hd/fill.json)

Up-to-date as of `2484116`.

### `pdk/setup/magic/`

`skywater130.magicrc`

Adapted from
https://github.com/RTimothyEdwards/open_pdks/blob/master/sky130/magic/sky130.magicrc.
Some contents were removed for simplicity, in particular the paths to reference
cells. These aren't necessary for DRC, just GDS export (which we handle with KLayout).

`sky130A.tech`

Source (filled-in template):
[open_pdks](https://github.com/RTimothyEdwards/open_pdks/blob/master/sky130/magic/sky130.tech).

Up-to-date as of `b06f0f2`.

### `libs/sky130hd/v0_0_2/`

`gds/sky130_fd_sc_hd.gds`

Source: [OpenROAD](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/master/flow/platforms/sky130hd/gds/sky130_fd_sc_hd.gds)

Up-to-date as of `2484116`.

### `libs/sky130hd/v0_0_2/lef/`

`sky130_fd_sc_hd_merged.lef`

Source: [OpenROAD](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/master/flow/platforms/sky130hd/lef/sky130_fd_sc_hd_merged.lef)

Up-to-date as of `2484116`.

`sky130_fd_sc_hd_merged_tech.lef`

Source: generated by passing `sky130_fd_sc_hd_merged.lef` and
`sky130_fd_sc_hd.tlef` through `mergeLef.py`. This custom-generated LEF file is
referenced in `skywater130.lyt`.

### `libs/sky130hd/v0_0_2/lib/`

`sky130_fd_sc_hd__tt_025C_1v80.lib `

Source: [OpenROAD](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts/blob/master/flow/platforms/sky130hd/lib/sky130_fd_sc_hd__tt_025C_1v80.lib)

Up-to-date as of `2484116`.

`sky130_fd_sc_hd__tt_025C_1v80_synth.lib `

Source: Generated by running sky130_fd_sc_hd__tt_025C_1v80.lib through OpenLANE's
[libtrim.pl](https://github.com/efabless/openlane/blob/master/scripts/libtrim.pl)
script, opting to ignore the cells specified in `drc_exclude.cells` and
`no_synth.cells` in this [directory](.
https://github.com/RTimothyEdwards/open_pdks/tree/master/sky130/openlane/sky130_fd_sc_hd).
This mimics a process that OpenLANE performs behind the scenes to generate a
temporary version of the library file without these cells that it then passes
into synthesis. This file is passed to synthesis by storing it in the schema as
`cfg['stdcell'][targetlib]['model']['typical']['nldm']['lib_synth']`.
